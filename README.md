# movie-ticket-system
电影抢票系统原型(一个简单的抢票系统原型)

## 技术架构

Spring MVC + Spring Data JPA + Spring Data Redis + Datanucleus JPA + Mariadb + Spring mail

演示地址：已失效   测试账号：test 密码：test

## 功能介绍

1. 用户使用邮箱注册、用户登录；

2. 用户查看电影票信息；

3. 用户可以在电影票详情页查看抢购信息，可以显示使用倒计时的方式显示未开始活动。

4. 用户只能购买一次电影票，购买成功后发送邮件到用户邮箱；

## 抢票技术逻辑

* 用户请求购票时首先直接返回结果，将购票请求加入请求队列，使用Spring-Redis处理该消息队列，然后再后台按顺序处理用户请求。
* 在实际开发中，缓存电影票总数，并在用户请求成功后更新数据，这样能够过滤无效请求。
* 前端直接获得请求成功的结果后，使用轮询技术访问请求结果，该结果可以使用(userId,result)键值对形式缓存在Redis中，后台处理用户请求时更新。

## 存在问题

Redis处理消息队列不太稳定，可能与数据库不一致。

   ​
